<!DOCTYPE html>

<textarea name="city" id="city" cols="30" rows="1" placeholder="Введите ваш город..."></textarea>
<p id="textCity"></p>
<button id="reset">Сброс</button>

<script>

	function getCookie(name) {
		let matches = document.cookie.match(new RegExp(
		"(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
		));
		return matches ? decodeURIComponent(matches[1]) : undefined;
	}
	function setCookie(name, value) {		
		
  		let updatedCookie = encodeURIComponent(name) + "=" + encodeURIComponent(value);
  		for (let optionKey in options) {
    			updatedCookie += "; " + optionKey;
    			let optionValue = options[optionKey];
    			if (optionValue !== true) {
      			updatedCookie += "=" + optionValue;
    			}
  		}

  	document.cookie = updatedCookie;
	}
				
	function deleteCookie(name) {
  		setCookie(name, "", {
    		'max-age': -1
  		})
	}
 
	let textArea = document.querySelector("#city");
	let btn = document.querySelector("#reset");

	textArea.oninput = () => {
		setCookie("city",textArea) 
	}

	if (document.cookie.split()[0].includes("city")){
		document.querySelector("textarea").style.display = "none";
		document.querySelector("#textCity").textContent = "Ваш город " + getCookie("city");
	}

	btn.onclick = () => {
		deleteCookie("city");
		document.location.reload(true);
	}

</script>
