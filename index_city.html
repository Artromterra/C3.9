<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>city</title>
</head>

<body>
<textarea name="city" id="city" cols="30" rows="1" placeholder="Введите ваш город..."></textarea>
<p id="textCity"></p>
<button id="reset">Сброс</button>

<script>

	function getCookie(name) {
		let matches = document.cookie.match(new RegExp(
		"(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
		));
		return matches ? decodeURIComponent(matches[1]) : undefined;
	};

	function setCookie(name, value) {	
  		let updatedCookie = encodeURIComponent(name) + "=" + encodeURIComponent(value);
  		document.cookie = updatedCookie;
	};

	let textArea = document.querySelector("#city");
	let btn = document.querySelector("#reset");

	textArea.oninput = () => {
		setCookie('city', textArea.value);
	};

	if (document.cookie.split()[0].includes("city")){
		document.querySelector("textarea").style.display = "none";
		document.querySelector("#textCity").textContent = "Ваш город " + getCookie("city");
	};

	btn.onclick = () => {
		document.cookie = "city=textArea.value; max-age=0";
		document.location.reload(true);
	};

</script>
</body>
</html>